topicprefix = /topic/
main_collective = mcollective
collectives = mcollective
libdir = <%= @mcollective_libdir %>
logfile = /var/log/mcollective.log
loglevel = info
daemonize = <%= @mcollective_daemonize %>

# Plugins
securityprovider = <%= @security_provider %>
plugin.<%= @security_provider %> = <%= @security_secret %>

connector = <%= @connector %>
<% if @connector == 'rabbitmq' %>
plugin.rabbitmq.vhost = <%= @vhost %>
<% end %>
plugin.<%= @connector %>.pool.size = 1
plugin.<%= @connector %>.pool.1.host = <%= @stomp_broker %>
plugin.<%= @connector %>.pool.1.user = <%= @user %>
plugin.<%= @connector %>.pool.1.password = <%= @password %>
plugin.<%= @connector %>.pool.1.ssl = <%= @ssl %>
<% if @ssl %>
plugin.<%= @connector %>.pool.1.port = <%= @stomp_ssl_port %>
plugin.<%= @connector %>.pool.1.ssl.cert = <%= @ssl_cert %>
plugin.<%= @connector %>.pool.1.ssl.key = <%= @ssl_key %>
plugin.<%= @connector %>.pool.1.ssl.ca = <%= @ssl_ca %>
<% else %>
plugin.<%= @connector %>.pool.1.port = <%= @stomp_port %>
<% end %>

plugin.puppetca.cadir = /srv/puppetca/ca/

# Facts
factsource = yaml
plugin.yaml = /etc/mcollective/facts.yaml

classesfile = /var/lib/puppet/state/classes.txt

registerinterval = 300
registration = Agentlist

